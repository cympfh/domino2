<body>
<script src="./data.js"></script>
<canvas id="C" width="800" height="220" style="border:black 1px solid"></canvas>
<div onclick="run()" id="D">[start]</div>
<script>
var interval = 30;

var C, D;
function run () {
    idx = 0;
    C = document.getElementById("C").getContext("2d");
    D = document.getElementById("D");
    D.innerHTML = "runninng";
    anima(0);
}
function anima (idx) {
    if (idx >= data.length)
        return D.innerHTML="finish";
    C.clearRect(0,0, 800, 220);
    C.beginPath();
    C.moveTo(0,201);
    C.lineTo(800, 201);
    C.stroke();
    display(idx);
    setTimeout(anima, interval, idx+1);
}
function display (idx) {
    var ls = data[idx], len = ls.length;
    for (var i=0; i<len; i+=4) {
        C.beginPath();
        C.moveTo(ls[i], 200-ls[i+1]);
        C.lineTo(ls[i+2], 200-ls[i+3]);
        C.stroke();
    }
}
</script>
